Plano Detalhado de Melhorias - Projeto "Nossa Maternidade"

     ğŸ“‹ Resumo Executivo

     AnÃ¡lise completa identificou 17 problemas distribuÃ­dos em 4 nÃ­veis de severidade, totalizando
      56 horas de trabalho (~7 dias). Plano organizado em 5 sprints priorizados.

     ---
     ğŸš¨ SPRINT 1 - CRÃTICO (13h)

     1.1 Validar Credenciais de API âš ï¸ (1h)

     Arquivo: src/config/api.ts
     Problema: API keys podem estar vazias sem avisos
     AÃ§Ã£o:
     - Adicionar validaÃ§Ã£o obrigatÃ³ria que lanÃ§a erro se keys faltando
     - Adicionar mensagens de erro claras

     1.2 Corrigir AutenticaÃ§Ã£o TemporÃ¡ria âš ï¸ (2h)

     Arquivo: src/screens/OnboardingScreen.tsx:84-87
     Problema: Emails temporÃ¡rios violam LGPD, senhas fracas
     AÃ§Ã£o:
     - Implementar autenticaÃ§Ã£o anÃ´nima do Supabase
     - Configurar migraÃ§Ã£o de contas anÃ´nimas para reais (futuro)

     1.3 Otimizar ChatScreen Re-renders âš ï¸ (3h)

     Arquivo: src/screens/ChatScreen.tsx:75-143
     Problema: Re-renders desnecessÃ¡rios travam app com muitas mensagens
     AÃ§Ã£o:
     - Usar useRef para messages
     - Memoizar histÃ³rico de IA
     - Otimizar callbacks

     1.4 Implementar Sistema de Logging âš ï¸ (3h)

     Arquivos: 8 arquivos com console.log
     Problema: 20+ console.logs em produÃ§Ã£o vazam dados e prejudicam performance
     AÃ§Ã£o:
     - Criar src/utils/logger.ts
     - Substituir todos console.log/error
     - Preparar integraÃ§Ã£o Sentry (opcional)

     1.5 Criar Tipos Centralizados âš ï¸ (4h)

     Arquivos: 11 ocorrÃªncias de any em 8 arquivos
     Problema: Falta type-safety, bugs em runtime
     AÃ§Ã£o:
     - Criar src/types/index.ts com interfaces completas
     - Remover todos any e substituir por tipos explÃ­citos
     - Criar src/types/navigation.ts para navegaÃ§Ã£o type-safe

     ---
     ğŸ”´ SPRINT 2 - ALTO RISCO (14h)

     2.1 Corrigir Tipagem de NavegaÃ§Ã£o ğŸ”´ (3h)

     Problema: as never em todos os navigate()
     AÃ§Ã£o:
     - Criar tipos de navegaÃ§Ã£o corretos
     - Atualizar todas as screens
     - Remover type casting perigoso

     2.2 Criar Hook useDailyPlan ğŸ”´ (2h)

     Problema: CÃ³digo duplicado em HomeScreen e DailyPlanScreen
     AÃ§Ã£o:
     - Criar src/hooks/useDailyPlan.ts
     - Refatorar ambas as screens

     2.3 Adicionar Acessibilidade Faltante ğŸ”´ (2h)

     Problema: BotÃµes sem accessibilityLabel em 3 screens
     AÃ§Ã£o:
     - Adicionar labels em ChatScreen, DailyPlanScreen, ProfileScreen
     - Garantir WCAG 2.1 AA completo

     2.4 Implementar ValidaÃ§Ãµes de Input ğŸ”´ (2h)

     Arquivo: src/screens/OnboardingScreen.tsx
     Problema: Inputs aceitam dados invÃ¡lidos
     AÃ§Ã£o:
     - Criar src/utils/validation.ts
     - Validar semana de gravidez (1-42)
     - Validar nome nÃ£o vazio

     2.5 Separar Responsabilidades (Repositories) ğŸ”´ (4h)

     Problema: LÃ³gica de negÃ³cio misturada com UI
     AÃ§Ã£o:
     - Criar src/repositories/DailyPlanRepository.ts
     - Criar src/repositories/UserRepository.ts
     - Refatorar services

     2.6 Adicionar Loading States ğŸ”´ (1h)

     Problema: Tela branca durante loading (ruim UX)
     AÃ§Ã£o:
     - Criar src/components/LoadingScreen.tsx
     - Substituir return null por loading bonito

     ---
     ğŸŸ¡ SPRINT 3 - MÃ‰DIO (8h)

     3.1 Corrigir Cores Hardcoded ğŸŸ¡ (1h)

     Arquivos: Badge.tsx, Logo.tsx, ChatScreen.tsx
     AÃ§Ã£o: Adicionar cores faltantes ao theme ou usar existentes

     3.2 Memoizar Componentes ğŸŸ¡ (1h)

     Arquivo: src/screens/HomeScreen.tsx:90-103
     AÃ§Ã£o: Usar React.memo em QuickActionButton

     3.3 Adicionar JSDoc ğŸŸ¡ (2h)

     Arquivos: Services e Hooks
     AÃ§Ã£o: Documentar todas as funÃ§Ãµes pÃºblicas

     3.4 Padronizar Nomenclatura ğŸŸ¡ (1h)

     AÃ§Ã£o:
     - Padronizar nomes de screens
     - Padronizar export (default vs named)
     - Padronizar interface vs type

     3.5 Extrair Magic Numbers ğŸŸ¡ (1h)

     AÃ§Ã£o: Criar src/constants/index.ts com todas as constantes

     3.6 Melhorar Estrutura de Pastas ğŸŸ¡ (30min)

     AÃ§Ã£o: Criar pastas /types, /constants, /repositories

     3.7 Refatorar useEffect com Cleanup ğŸŸ¡ (1.5h)

     Problema: useEffect async sem abort
     AÃ§Ã£o: Adicionar AbortController em todos os effects

     ---
     âœ… SPRINT 4 - TESTES (16h)

     4.1 Configurar Ambiente de Testes (2h)

     AÃ§Ã£o:
     - Instalar Jest + React Native Testing Library
     - Configurar setup files
     - Criar mocks bÃ¡sicos

     4.2 Testes UnitÃ¡rios de Componentes (8h)

     AÃ§Ã£o: Criar testes para Button, Input, Card, Badge

     4.3 Testes de Hooks (4h)

     AÃ§Ã£o: Testar useUserProfile, useDailyInteractions

     4.4 Testes E2E BÃ¡sicos (2h)

     AÃ§Ã£o: Fluxos crÃ­ticos (onboarding, chat, daily plan)

     ---
     ğŸŸ¢ SPRINT 5 - REFINAMENTO (5h)

     5.1 Configurar ESLint/Prettier (30min)

     AÃ§Ã£o: Setup completo com regras strict

     5.2 Organizar Imports (30min)

     AÃ§Ã£o: Configurar import sorting automÃ¡tico

     5.3 Melhorar TypeScript Strict (2h)

     AÃ§Ã£o: Ativar strict mode e corrigir erros

     5.4 Code Review Final (2h)

     AÃ§Ã£o: RevisÃ£o completa do cÃ³digo refatorado

     ---
     ğŸ“Š MÃ©tricas

     - Problemas CrÃ­ticos: 4 âš ï¸
     - Problemas Altos: 3 ğŸ”´
     - Problemas MÃ©dios: 6 ğŸŸ¡
     - Problemas Baixos: 4 ğŸŸ¢
     - Total: 17 problemas
     - Tempo Total: 56 horas (~7 dias)

     ---
     ğŸ¯ Resultado Esperado

     ApÃ³s execuÃ§Ã£o completa:
     - âœ… Type-safety 100%
     - âœ… Cobertura de testes >80%
     - âœ… Performance otimizada
     - âœ… SeguranÃ§a garantida
     - âœ… CÃ³digo pronto para produÃ§Ã£o

     Status Final: â­â­â­â­ (4/5 estrelas)